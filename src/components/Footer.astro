---
import CookieConsent from './CookieConsent.astro';
const today = new Date();
---

<footer class="py-12 mt-20 border-t border-muted">
	<div class="max-w-4xl mx-auto px-6">
		{/* Top Row: Site Links (Left) & Social Links (Right) */}
		<div class="flex flex-col md:flex-row items-center justify-between gap-8 mb-12 text-center md:text-left">
			<nav class="flex flex-wrap justify-center md:justify-start gap-2">
				<a href="/bookmarks" class="px-3 py-1.5 rounded-full text-foreground hover:bg-brand/10 hover:text-brand transition-all text-sm font-medium">Bookmarks</a>
				<a href="/gallery" class="px-3 py-1.5 rounded-full text-foreground hover:bg-brand/10 hover:text-brand transition-all text-sm font-medium">Gallery</a>
				<a href="/gear" class="px-3 py-1.5 rounded-full text-foreground hover:bg-brand/10 hover:text-brand transition-all text-sm font-medium">Gear</a>
				<a href="/stack" class="px-3 py-1.5 rounded-full text-foreground hover:bg-brand/10 hover:text-brand transition-all text-sm font-medium">Stack</a>
			</nav>
			<nav class="flex flex-wrap justify-center md:justify-end gap-2">
				<a href="/rss.xml" target="_blank" class="px-3 py-1.5 rounded-full text-foreground hover:bg-brand/10 hover:text-brand transition-all text-sm font-medium">RSS</a>
				<a href="/tags" class="px-3 py-1.5 rounded-full text-foreground hover:bg-brand/10 hover:text-brand transition-all text-sm font-medium">Tags</a>
				<a href="/xlog" class="px-3 py-1.5 rounded-full text-foreground hover:bg-brand/10 hover:text-brand transition-all text-sm font-medium">X-log</a>
			</nav>
		</div>

		{/* Divider: Dashed line */}
		<div class="border-t border-dashed border-muted mb-8"></div>

		{/* Bottom Row: Powered By (Left) & Copyright (Right) */}
		<div class="flex flex-col md:flex-row items-center justify-between gap-6">
			<div class="flex flex-wrap justify-center md:justify-start items-center gap-x-3 gap-y-2 text-[9px] uppercase tracking-[0.2em] text-muted-foreground/30 font-bold">
				<span class="mr-1">Powered by</span>
				<a href="https://antigravity.google" target="_blank" class="hover:text-brand transition-colors">Antigravity</a>
				<span class="w-1 h-1 rounded-full bg-muted-foreground/20"></span>
				<a href="https://gemini.google.com" target="_blank" class="hover:text-brand transition-colors">Gemini</a>
				<span class="w-1 h-1 rounded-full bg-muted-foreground/20"></span>
				<a href="https://astro.build" target="_blank" class="hover:text-brand transition-colors">Astro</a>
				<span class="w-1 h-1 rounded-full bg-muted-foreground/20"></span>
				<a href="https://github.com" target="_blank" class="hover:text-brand transition-colors">GitHub</a>
				<span class="w-1 h-1 rounded-full bg-muted-foreground/20"></span>
				<a href="https://cloudflare.com" target="_blank" class="hover:text-brand transition-colors">Cloudflare</a>
				<span class="w-1 h-1 rounded-full bg-muted-foreground/20"></span>
				<a href="https://vercel.com" target="_blank" class="hover:text-brand transition-colors">Vercel</a>
			</div>

			<p class="text-muted-foreground text-sm font-medium">
				&copy; {today.getFullYear()} Glog. All rights reserved.
			</p>
		</div>
	</div>
</footer>

<!-- Back to Top Button -->
<button 
    id="back-to-top" 
    class="fixed z-50 w-12 h-12 flex items-center justify-center bg-background/80 backdrop-blur-xl border border-muted/50 rounded-full shadow-lg hover:shadow-brand/20 hover:border-brand transition-all transform translate-y-20 opacity-0 pointer-events-none group"
    style="right: max(1.5rem, calc(50vw - 450px)); bottom: 2rem;"
    title="Back to Top"
>
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="text-muted-foreground group-hover:text-brand transition-all group-hover:-translate-y-1"><path d="m18 15-6-6-6 6"/></svg>
</button>

<script>
	const setupBackToTop = () => {
		const topBtn = document.getElementById('back-to-top');
		if (!topBtn) return;

		const updatePosition = () => {
			const scrollY = window.scrollY;
			
			// Show/Hide logic
			if (scrollY > 400) {
				topBtn.classList.remove('translate-y-20', 'opacity-0', 'pointer-events-none');
				topBtn.classList.add('translate-y-0', 'opacity-100');
			} else {
				topBtn.classList.add('translate-y-20', 'opacity-0', 'pointer-events-none');
				topBtn.classList.remove('translate-y-0', 'opacity-100');
			}
		};

		window.addEventListener('scroll', updatePosition);
		window.addEventListener('resize', updatePosition);
		topBtn.addEventListener('click', () => {
			window.scrollTo({ top: 0, behavior: 'smooth' });
		});
		
		updatePosition();
	};

	document.addEventListener('astro:page-load', setupBackToTop);
</script>

<CookieConsent />
